{"ast":null,"code":"import React,{useEffect,useMemo,useState}from'react';import CryptoJS from'crypto-js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Entries(){const[entries,setEntries]=useState([]);const[query,setQuery]=useState('');useEffect(()=>{const user=localStorage.getItem('user');if(!user)return;const encryptedEntries=JSON.parse(localStorage.getItem(\"\".concat(user,\"_entries\"))||'[]');const decryptedEntries=encryptedEntries.map(e=>{try{const bytes=CryptoJS.AES.decrypt(e,'secret-key');return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));}catch(_unused){return null;}}).filter(Boolean);// newest first\ndecryptedEntries.sort((a,b)=>new Date(b.date)-new Date(a.date));setEntries(decryptedEntries);},[]);const filtered=useMemo(()=>{const q=query.trim().toLowerCase();if(!q)return entries;return entries.filter(e=>(e.text||'').toLowerCase().includes(q)||(e.tags||[]).some(t=>t.toLowerCase().includes(q)));},[entries,query]);return/*#__PURE__*/_jsx(\"div\",{className:\"main-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDCDA All Entries\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form\",style:{marginBottom:'20px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search entries by text or tag...\",value:query,onChange:e=>setQuery(e.target.value)})}),filtered.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"No matching entries.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:filtered.map(e=>{var _e$files,_e$tags;return/*#__PURE__*/_jsxs(\"article\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",style:{justifyContent:'space-between',marginBottom:'12px'},children:[/*#__PURE__*/_jsx(\"small\",{className:\"muted\",children:new Date(e.date).toLocaleString()}),/*#__PURE__*/_jsx(\"span\",{className:\"badge \".concat(e.sentiment),children:e.sentiment})]}),/*#__PURE__*/_jsx(\"p\",{style:{marginTop:'12px',marginBottom:'16px',lineHeight:'1.6'},children:e.text}),((_e$files=e.files)===null||_e$files===void 0?void 0:_e$files.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"grid\",style:{gridTemplateColumns:'repeat(2,1fr)',gap:'12px',marginBottom:'16px'},children:e.files.map((f,idx)=>{var _f$type,_f$type2;return/*#__PURE__*/_jsx(\"div\",{className:\"media\",style:{borderRadius:'10px',overflow:'hidden'},children:(_f$type=f.type)!==null&&_f$type!==void 0&&_f$type.startsWith('image/')?/*#__PURE__*/_jsx(\"img\",{alt:f.name,src:f.dataUrl,style:{width:'100%',height:'160px',objectFit:'cover'}}):(_f$type2=f.type)!==null&&_f$type2!==void 0&&_f$type2.startsWith('video/')?/*#__PURE__*/_jsx(\"video\",{controls:true,src:f.dataUrl,style:{width:'100%',height:'160px',objectFit:'cover'}}):/*#__PURE__*/_jsx(\"a\",{href:f.dataUrl,download:f.name,className:\"link\",children:f.name})},idx);})}),((_e$tags=e.tags)===null||_e$tags===void 0?void 0:_e$tags.length)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex\",style:{marginTop:'12px',gap:'8px',flexWrap:'wrap'},children:e.tags.map((t,i)=>/*#__PURE__*/_jsx(\"span\",{className:\"badge\",style:{fontWeight:700},children:t},i))})]},e.id);})})]})});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","CryptoJS","jsx","_jsx","jsxs","_jsxs","Entries","entries","setEntries","query","setQuery","user","localStorage","getItem","encryptedEntries","JSON","parse","concat","decryptedEntries","map","e","bytes","AES","decrypt","toString","enc","Utf8","_unused","filter","Boolean","sort","a","b","Date","date","filtered","q","trim","toLowerCase","text","includes","tags","some","t","className","children","style","marginBottom","type","placeholder","value","onChange","target","length","_e$files","_e$tags","justifyContent","toLocaleString","sentiment","marginTop","lineHeight","files","gridTemplateColumns","gap","f","idx","_f$type","_f$type2","borderRadius","overflow","startsWith","alt","name","src","dataUrl","width","height","objectFit","controls","href","download","flexWrap","i","fontWeight","id"],"sources":["D:/MindSync/src/pages/Entries.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nexport default function Entries() {\r\n  const [entries, setEntries] = useState([]);\r\n  const [query, setQuery] = useState('');\r\n\r\n  useEffect(() => {\r\n    const user = localStorage.getItem('user');\r\n    if (!user) return;\r\n    const encryptedEntries = JSON.parse(localStorage.getItem(`${user}_entries`) || '[]');\r\n    const decryptedEntries = encryptedEntries.map((e) => {\r\n      try {\r\n        const bytes = CryptoJS.AES.decrypt(e, 'secret-key');\r\n        return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\r\n      } catch {\r\n        return null;\r\n      }\r\n    }).filter(Boolean);\r\n    // newest first\r\n    decryptedEntries.sort((a,b) => new Date(b.date) - new Date(a.date));\r\n    setEntries(decryptedEntries);\r\n  }, []);\r\n\r\n  const filtered = useMemo(() => {\r\n    const q = query.trim().toLowerCase();\r\n    if (!q) return entries;\r\n    return entries.filter((e) =>\r\n      (e.text || '').toLowerCase().includes(q) ||\r\n      (e.tags || []).some((t) => t.toLowerCase().includes(q))\r\n    );\r\n  }, [entries, query]);\r\n\r\n  return (\r\n    <div className=\"main-content\">\r\n      <div className=\"page-container\">\r\n        <h1>ðŸ“š All Entries</h1>\r\n        <div className=\"form\" style={{marginBottom:'20px'}}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search entries by text or tag...\"\r\n            value={query}\r\n            onChange={(e)=>setQuery(e.target.value)}\r\n          />\r\n        </div>\r\n\r\n        {filtered.length === 0 ? (\r\n          <p className=\"muted\">No matching entries.</p>\r\n        ) : (\r\n          <div className=\"grid\">\r\n            {filtered.map((e) => (\r\n              <article key={e.id} className=\"card\">\r\n                <div className=\"flex\" style={{justifyContent:'space-between', marginBottom:'12px'}}>\r\n                  <small className=\"muted\">{new Date(e.date).toLocaleString()}</small>\r\n                  <span className={`badge ${e.sentiment}`}>{e.sentiment}</span>\r\n                </div>\r\n                <p style={{marginTop:'12px', marginBottom:'16px', lineHeight:'1.6'}}>{e.text}</p>\r\n                {e.files?.length > 0 && (\r\n                  <div className=\"grid\" style={{gridTemplateColumns:'repeat(2,1fr)', gap:'12px', marginBottom:'16px'}}>\r\n                    {e.files.map((f, idx) => (\r\n                      <div key={idx} className=\"media\" style={{borderRadius:'10px', overflow:'hidden'}}>\r\n                        {f.type?.startsWith('image/') ? (\r\n                          <img alt={f.name} src={f.dataUrl} style={{width:'100%', height:'160px', objectFit:'cover'}} />\r\n                        ) : f.type?.startsWith('video/') ? (\r\n                          <video controls src={f.dataUrl} style={{width:'100%', height:'160px', objectFit:'cover'}} />\r\n                        ) : (\r\n                          <a href={f.dataUrl} download={f.name} className=\"link\">{f.name}</a>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n                {e.tags?.length > 0 && (\r\n                  <div className=\"flex\" style={{marginTop:'12px', gap:'8px', flexWrap:'wrap'}}>\r\n                    {e.tags.map((t, i) => (\r\n                      <span key={i} className=\"badge\" style={{fontWeight:700}}>{t}</span>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </article>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}