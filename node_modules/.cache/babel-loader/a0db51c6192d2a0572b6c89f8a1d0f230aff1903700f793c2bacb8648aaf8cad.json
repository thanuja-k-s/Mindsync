{"ast":null,"code":"import React,{useState,useRef}from'react';import{useNavigate}from'react-router-dom';import CryptoJS from'crypto-js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Journaling=()=>{const[entry,setEntry]=useState('');const[files,setFiles]=useState([]);const[isRecording,setIsRecording]=useState(false);const[transcription,setTranscription]=useState('');const[saving,setSaving]=useState(false);const[savedMsg,setSavedMsg]=useState('');const recognitionRef=useRef(null);const navigate=useNavigate();const handleFileUpload=e=>{setFiles([...files,...Array.from(e.target.files||[])]);};const startRecording=()=>{if(!('webkitSpeechRecognition'in window)){alert('Speech recognition not supported');return;}// eslint-disable-next-line no-undef\nconst recognition=new webkitSpeechRecognition();recognition.continuous=false;recognition.interimResults=false;recognition.lang='en-US';recognition.onstart=()=>setIsRecording(true);recognition.onresult=event=>{const transcript=event.results[0][0].transcript;setTranscription(transcript);setEntry(prev=>prev+' '+transcript);};recognition.onend=()=>setIsRecording(false);recognitionRef.current=recognition;recognition.start();};const stopRecording=()=>{if(recognitionRef.current){recognitionRef.current.stop();}};const saveEntry=async()=>{const user=localStorage.getItem('user');if(!user)return;setSaving(true);// Convert files to data URLs for storage\nconst fileObjs=await Promise.all(files.map(f=>new Promise(resolve=>{const reader=new FileReader();reader.onload=()=>resolve({name:f.name,type:f.type,size:f.size,dataUrl:reader.result});reader.readAsDataURL(f);})));const newEntry={id:Date.now(),text:entry,files:fileObjs,date:new Date().toISOString(),tags:generateTags(entry),sentiment:analyzeSentiment(entry)};// Encrypt and store\nconst encrypted=CryptoJS.AES.encrypt(JSON.stringify(newEntry),'secret-key').toString();const entries=JSON.parse(localStorage.getItem(\"\".concat(user,\"_entries\"))||'[]');entries.push(encrypted);localStorage.setItem(\"\".concat(user,\"_entries\"),JSON.stringify(entries));// Reset form\nsetEntry('');setFiles([]);setTranscription('');setSaving(false);setSavedMsg('Entry saved successfully!');setTimeout(()=>setSavedMsg(''),2000);// Navigate to entries page to view the saved item\nsetTimeout(()=>navigate('/entries'),500);};const generateTags=text=>{// Mock keyword extraction\nconst words=text.toLowerCase().split(' ');return words.filter(w=>w.length>3).slice(0,5);};const analyzeSentiment=text=>{// Mock sentiment analysis\nconst positiveWords=['happy','good','great','awesome'];const negativeWords=['sad','bad','terrible','awful'];const words=text.toLowerCase().split(' ');const positiveCount=words.filter(w=>positiveWords.includes(w)).length;const negativeCount=words.filter(w=>negativeWords.includes(w)).length;if(positiveCount>negativeCount)return'positive';if(negativeCount>positiveCount)return'negative';return'neutral';};return/*#__PURE__*/_jsxs(\"div\",{className:\"journaling-container page-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"New Entry\"}),/*#__PURE__*/_jsx(\"textarea\",{value:entry,onChange:e=>setEntry(e.target.value),placeholder:\"Write your thoughts...\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,onChange:handleFileUpload,accept:\"image/*,video/*,.pdf,.doc,.docx\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid\",style:{marginTop:'10px'},children:files.map((f,i)=>/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{padding:'8px'},children:/*#__PURE__*/_jsx(\"small\",{children:f.name})},i))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:isRecording?stopRecording:startRecording,children:isRecording?'Stop Recording':'Start Voice Recording'}),transcription&&/*#__PURE__*/_jsxs(\"p\",{children:[\"Transcription: \",transcription]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:saveEntry,disabled:saving,children:saving?'Saving...':'Save Entry'}),savedMsg&&/*#__PURE__*/_jsx(\"p\",{className:\"badge positive\",style:{marginTop:'10px'},children:savedMsg})]});};export default Journaling;","map":{"version":3,"names":["React","useState","useRef","useNavigate","CryptoJS","jsx","_jsx","jsxs","_jsxs","Journaling","entry","setEntry","files","setFiles","isRecording","setIsRecording","transcription","setTranscription","saving","setSaving","savedMsg","setSavedMsg","recognitionRef","navigate","handleFileUpload","e","Array","from","target","startRecording","window","alert","recognition","webkitSpeechRecognition","continuous","interimResults","lang","onstart","onresult","event","transcript","results","prev","onend","current","start","stopRecording","stop","saveEntry","user","localStorage","getItem","fileObjs","Promise","all","map","f","resolve","reader","FileReader","onload","name","type","size","dataUrl","result","readAsDataURL","newEntry","id","Date","now","text","date","toISOString","tags","generateTags","sentiment","analyzeSentiment","encrypted","AES","encrypt","JSON","stringify","toString","entries","parse","concat","push","setItem","setTimeout","words","toLowerCase","split","filter","w","length","slice","positiveWords","negativeWords","positiveCount","includes","negativeCount","className","children","value","onChange","placeholder","multiple","accept","style","marginTop","i","padding","onClick","disabled"],"sources":["D:/MindSync/src/pages/Journaling.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport CryptoJS from 'crypto-js';\r\n\r\nconst Journaling = () => {\r\n  const [entry, setEntry] = useState('');\r\n  const [files, setFiles] = useState([]);\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [transcription, setTranscription] = useState('');\r\n  const [saving, setSaving] = useState(false);\r\n  const [savedMsg, setSavedMsg] = useState('');\r\n  const recognitionRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n  const handleFileUpload = (e) => {\r\n    setFiles([...files, ...Array.from(e.target.files || [])]);\r\n  };\r\n\r\n  const startRecording = () => {\r\n    if (!('webkitSpeechRecognition' in window)) {\r\n      alert('Speech recognition not supported');\r\n      return;\r\n    }\r\n    // eslint-disable-next-line no-undef\r\n    const recognition = new webkitSpeechRecognition();\r\n    recognition.continuous = false;\r\n    recognition.interimResults = false;\r\n    recognition.lang = 'en-US';\r\n\r\n    recognition.onstart = () => setIsRecording(true);\r\n    recognition.onresult = (event) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      setTranscription(transcript);\r\n      setEntry(prev => prev + ' ' + transcript);\r\n    };\r\n    recognition.onend = () => setIsRecording(false);\r\n\r\n    recognitionRef.current = recognition;\r\n    recognition.start();\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    if (recognitionRef.current) {\r\n      recognitionRef.current.stop();\r\n    }\r\n  };\r\n\r\n  const saveEntry = async () => {\r\n    const user = localStorage.getItem('user');\r\n    if (!user) return;\r\n\r\n    setSaving(true);\r\n\r\n    // Convert files to data URLs for storage\r\n    const fileObjs = await Promise.all(\r\n      files.map(\r\n        (f) =>\r\n          new Promise((resolve) => {\r\n            const reader = new FileReader();\r\n            reader.onload = () =>\r\n              resolve({\r\n                name: f.name,\r\n                type: f.type,\r\n                size: f.size,\r\n                dataUrl: reader.result,\r\n              });\r\n            reader.readAsDataURL(f);\r\n          })\r\n      )\r\n    );\r\n\r\n    const newEntry = {\r\n      id: Date.now(),\r\n      text: entry,\r\n      files: fileObjs,\r\n      date: new Date().toISOString(),\r\n      tags: generateTags(entry),\r\n      sentiment: analyzeSentiment(entry)\r\n    };\r\n\r\n    // Encrypt and store\r\n    const encrypted = CryptoJS.AES.encrypt(JSON.stringify(newEntry), 'secret-key').toString();\r\n    const entries = JSON.parse(localStorage.getItem(`${user}_entries`) || '[]');\r\n    entries.push(encrypted);\r\n    localStorage.setItem(`${user}_entries`, JSON.stringify(entries));\r\n\r\n    // Reset form\r\n    setEntry('');\r\n    setFiles([]);\r\n    setTranscription('');\r\n    setSaving(false);\r\n    setSavedMsg('Entry saved successfully!');\r\n    setTimeout(() => setSavedMsg(''), 2000);\r\n    // Navigate to entries page to view the saved item\r\n    setTimeout(() => navigate('/entries'), 500);\r\n  };\r\n\r\n  const generateTags = (text) => {\r\n    // Mock keyword extraction\r\n    const words = text.toLowerCase().split(' ');\r\n    return words.filter(w => w.length > 3).slice(0, 5);\r\n  };\r\n\r\n  const analyzeSentiment = (text) => {\r\n    // Mock sentiment analysis\r\n    const positiveWords = ['happy', 'good', 'great', 'awesome'];\r\n    const negativeWords = ['sad', 'bad', 'terrible', 'awful'];\r\n    const words = text.toLowerCase().split(' ');\r\n    const positiveCount = words.filter(w => positiveWords.includes(w)).length;\r\n    const negativeCount = words.filter(w => negativeWords.includes(w)).length;\r\n    if (positiveCount > negativeCount) return 'positive';\r\n    if (negativeCount > positiveCount) return 'negative';\r\n    return 'neutral';\r\n  };\r\n\r\n  return (\r\n    <div className=\"journaling-container page-container\">\r\n      <h2>New Entry</h2>\r\n      <textarea\r\n        value={entry}\r\n        onChange={(e) => setEntry(e.target.value)}\r\n        placeholder=\"Write your thoughts...\"\r\n      />\r\n      <div>\r\n        <input type=\"file\" multiple onChange={handleFileUpload} accept=\"image/*,video/*,.pdf,.doc,.docx\" />\r\n        <div className=\"grid\" style={{marginTop:'10px'}}>\r\n          {files.map((f, i) => (\r\n            <div key={i} className=\"card\" style={{padding:'8px'}}>\r\n              <small>{f.name}</small>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <button onClick={isRecording ? stopRecording : startRecording}>\r\n          {isRecording ? 'Stop Recording' : 'Start Voice Recording'}\r\n        </button>\r\n        {transcription && <p>Transcription: {transcription}</p>}\r\n      </div>\r\n      <button onClick={saveEntry} disabled={saving}>{saving ? 'Saving...' : 'Save Entry'}</button>\r\n      {savedMsg && <p className=\"badge positive\" style={{marginTop:'10px'}}>{savedMsg}</p>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Journaling;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}